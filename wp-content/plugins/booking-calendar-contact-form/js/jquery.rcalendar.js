myjQuery="undefined"!=typeof myjQuery?myjQuery:jQuery,myjQuery(function(){!function(e){function t(){e(".rcalendar").each(function(){e(this).find(".ui-datepicker").css("width","");var t=0,a=0;e(this).find(".ui-datepicker-group").each(function(){var a=1*e(this).find(".ui-datepicker-calendar").css("height").replace("px","")+1*e(this).find(".ui-datepicker-header").css("height").replace("px","")+2;(0==t||t<a)&&(t=a)}),e(this).find(".ui-datepicker-group").each(function(){a<1*e(this).css("width").replace("px","")&&(a=1*e(this).css("width").replace("px",""))}),0!=t&&e(this).find(".ui-datepicker-group").each(function(){e(this).css("height",t+"px")})})}e.fn.rcalendar=function(i){var d=e.extend({},{title:"",colors:["FFF","FCC","FC9","FF9","FFC","9F9","9FF","CFF","CCF","FCF","CCC","F66","F96","FF6","FF3","6F9","3FF","6FF","99F","F9F","BBB","F00","F90","FC6","FF0","3F3","6CC","3CF","66C","C6C","999","C00","F60","FC3","FC0","3C0","0CC","36F","63F","C3C","666","900","C60","C93","990","090","399","33F","60C","939","333","600","930","963","660","060","366","009","339","636","000","300","630","633","330","030","033","006","309","303"],defaultColor:"F66",defaultSaveColor:"6FF",partial_colors:["CCC","F66","FF6","6F9","6FF","F9F","999","C00","FC3","3C0","36F","C3C","333","600","963","060","009","636"],partial_defaultColor:"F66",separator2:" - ",ajaxURL:pathCalendar,dialogWidth:400,edition:!0,readonly:!1,partialDate:!0,workingDates:[1,1,1,1,1,1,1],holidayDates:[],startReservationWeekly:[1,1,1,1,1,1,1],startReservationDates:[],fixedReservationDates:!1,fixedReservationDates_length:0,firstDay:0,language:"",dformat:"mm/dd/yy",minDate:"",maxDate:"",editid:"",startdate:"",enddate:"",showTooltipOnMouseOver:!1,numberOfMonths:1},i,!0);d.edition&&(d.showTooltipOnMouseOver=!0),d.partialDate&&(d.colors=d.partial_colors,d.defaultColor=d.partial_defaultColor),d.id=e(this).attr("id");e(this).attr("id");var r=!0,s=new Array,n=new Array;e("#"+d.id).html('<div class="dp" id="dp'+d.id+'"></div><input type="hidden" name="selDay_start'+d.id+'" id="selDay_start'+d.id+'" /><input type="hidden" name="selMonth_start'+d.id+'" id="selMonth_start'+d.id+'" /><input type="hidden" name="selYear_start'+d.id+'" id="selYear_start'+d.id+'" /><input type="hidden" name="selDay_end'+d.id+'" id="selDay_end'+d.id+'" /><input type="hidden" name="selMonth_end'+d.id+'" id="selMonth_end'+d.id+'" /><input type="hidden" name="selYear_end'+d.id+'" id="selYear_end'+d.id+'" />');var l={l:"",u:""},c=function(t,a,i){var r=e.datepicker.formatDate(i,t);return t.toString()!=a.toString()&&(r+=d.separator2+e.datepicker.formatDate(i,a)),r},o=function(t,a){e("#selDay_start"+d.id).val(""==t?"":t.getDate()).change(),e("#selMonth_start"+d.id).val(""==t?"":t.getMonth()+1).change(),e("#selYear_start"+d.id).val(""==t?"":t.getFullYear()).change(),e("#selDay_end"+d.id).val(""==a?"":a.getDate()).change(),e("#selMonth_end"+d.id).val(""==a?"":a.getMonth()+1).change(),e("#selYear_end"+d.id).val(""==a?"":a.getFullYear()).change()},p=function(){e("#"+d.id).find(".specialSelection,.specialSel").each(function(){if(!e(this).hasClass("specialDateLeft")&&!e(this).hasClass("specialDateRight")&&!e(this).hasClass("specialDateStart")&&e(this).find(".triangle,triangle2")){var t=e(this).find("a,span");e(this).find("div").each(function(){e(this).detach()}),e(this).append(t)}e(this).removeClass("specialSelection").css("background","none")})},f=function(t,a){if(e("#"+d.id).find(".specialSel").length>0)a.inline=!0;else{a.inline=!1,p();var i=".d"+e.datepicker.formatDate("yy-mm-dd",e.datepicker.parseDate(d.dformat,t));e("#"+d.id).find(i).addClass("specialSelection").css("background","#"+d.defaultColor)}},v=function(t,a,i){e(".myover").remove(),e(".myoverAdd").dialog("close"),t.append('<div class="'+i+'" >'+a+"</div>"),e("."+i).dialog({width:d.dialogWidth,height:300,close:function(t,a){e(this).hasClass("myoverAdd")&&(e(".myoverAdd").remove(),l.l="",l.u="",o(l.l,l.u),u(),h())},position:{my:"left top",at:"center bottom",collision:"fit",of:e("."+i).parent()}}).addClass("mv_dlg_nmonth").parent().addClass("mv_dlg"),e('<div id="mv_corner" />').appendTo(e(".mv_dlg .ui-dialog-titlebar")),e(".mv_dlg").css("top",parseFloat(e(".mv_dlg").css("top"))+17),e(".mv_dlg").css("left",parseFloat(e(".mv_dlg").css("left"))-29),e(".comboColor").click(function(){e(this).find(".listColor").css("display","")}),e(".comboColor .listColor div").click(function(){var t=e(this).attr("c");return e(this).parent().css("display","none"),e(this).parent().parent().css("background","#"+t).attr("c",t),!1}),e(".bCancelEvent").click(function(){try{e(".myover").dialog("close"),e(".myoverAdd").dialog("close")}catch(e){}return!1}),e(".bSaveEvent").click(function(){return D(e(this).parent().parent().parent().find(".eIndex").val(),e(this).parent().parent().find(".eTitle").val(),e(this).parent().parent().find(".eDesc").val(),e(this).parent().parent().find(".comboColor").attr("c")),e(".myover").remove(),e(".myoverAdd").remove(),!1})},h=function(){0==e("#dp"+d.id).find(".ui-datepicker-calendar").length?(m(),""!=d.startdate&&""!=d.enddate&&""!=d.editid&&(l={l:e.datepicker.parseDate("yy-mm-dd",d.startdate),u:e.datepicker.parseDate("yy-mm-dd",d.enddate)},e("#dp"+d.id).datepicker("setDate",l.u),o(l.l,l.u))):(r=!0,e("#dp"+d.id).datepicker("refresh"))},m=function(){try{e.fn.datepicker.noConflict()}catch(e){}var i,m=new Array;r=!0,e("#dp"+d.id)&&e("#dp"+d.id).datepicker("destroy"),i=e.datepicker._updateDatepicker,e.datepicker._updateDatepicker=function(e){i.call(this,e),t()},e("#dp"+d.id).datepicker({showOtherMonths:!1,showWeek:!0,numberOfMonths:d.numberOfMonths,onSelect:function(t,a){if(r=!0,!d.readonly){if(a.inline=!0,d.fixedReservationDates&&(""==l.l||""!=l.l&&""!=l.u))l.l=e.datepicker.parseDate(d.dformat,t),l.u="",(g=new Date(l.l.getTime())).setDate(g.getDate()+d.fixedReservationDates_length-(d.partialDate?0:1)),t=e.datepicker.formatDate(d.dformat,g);if(""==l.l||""!=l.l&&""!=l.u)l.l=e.datepicker.parseDate(d.dformat,t),l.u="",o(l.l,l.u),f(t,a);else{for(var i=l.l,n=e.datepicker.parseDate(d.dformat,t),h=i<=n,m=h?i:n,u=h?n:i,D=!0,y=0;y<s.length;y++)m<=s[y].l&&u>=s[y].u&&(D=!1);for(var g=new Date(m.getTime());g<=u;)(0==d.workingDates[g.getDay()]||d.holidayDates.length>0&&"-1"!=d.holidayDates.indexOf(e.datepicker.formatDate("yy-mm-dd",g)))&&(D=!1,g=new Date(u.getTime())),g.setDate(g.getDate()+1);!D||d.partialDate&&m.toString()==u.toString()?(d.fixedReservationDates?l.l="":l.l=e.datepicker.parseDate(d.dformat,t),f(t,a),l.u="",o(l.l,l.u)):(l.l=m,l.u=u,o(l.l,l.u),function(t,a,i){i.inline=!1,p();var r="",s=new Date(t.getTime());for(s.setDate(s.getDate()+1);s.getTime()<a.getTime();)r=".d"+e.datepicker.formatDate("yy-mm-dd",s),e("#"+d.id).find(r).addClass("specialSelection").css("background","#"+d.defaultColor),s.setDate(s.getDate()+1);if(d.partialDate){if(r=".d"+e.datepicker.formatDate("yy-mm-dd",a),e("#"+d.id).find(r).addClass("specialSelection"),e("#"+d.id).find(r).hasClass("specialDateLeft"))e("#"+d.id).find(r).addClass("specialSelection").css("background","#"+d.defaultColor);else{var n=(f=e("#"+d.id).find(r)).css("width"),l=f.css("height"),c=f.find("a,span"),o=e('<div class="t"></div>').append(c);f.append(o),f.append('<div class="triangle2"></div><div class="e">&nbsp;</div>'),e(r+" .t,"+r+" .e").css("width",n).css("height",l),e(r+" .triangle2").css("border-color","#"+d.defaultColor+" transparent transparent transparent").css("border-width",l+" "+n+" 0 0")}var f;if(r=".d"+e.datepicker.formatDate("yy-mm-dd",t),e("#"+d.id).find(r).addClass("specialSelection"),e("#"+d.id).find(r).hasClass("specialDateRight"))e("#"+d.id).find(r).addClass("specialSelection").css("background","#"+d.defaultColor);else n=(f=e("#"+d.id).find(r)).css("width"),l=f.css("height"),c=f.find("a,span"),o=e('<div class="t"></div>').append(c),f.append(o),f.append('<div class="triangle"></div><div class="e">&nbsp;</div>'),e(r+" .t,"+r+" .e").css("width",n).css("height",l),e(r+" .triangle").css("border-color","transparent transparent #"+d.defaultColor+" transparent").css("border-width","0 0 "+l+" "+n)}else r=".d"+e.datepicker.formatDate("yy-mm-dd",t),e("#"+d.id).find(r).addClass("specialSelection").css("background","#"+d.defaultColor),r=".d"+e.datepicker.formatDate("yy-mm-dd",a),e("#"+d.id).find(r).addClass("specialSelection").css("background","#"+d.defaultColor)}(m,u,a),d.edition&&setTimeout(function(){v(e(".d"+e.datepicker.formatDate("yy-mm-dd",u)),function(){var e="";e+="<div>",e+="<div >"+c(l.l,l.u,d.dformat)+"</div>",e+='<div><input type="hidden" class="eIndex" id="eIndex" value="-1"/></div>',e+='<div class="eWrite" >',e+='<div class="comboColor" style="background:#'+d.defaultSaveColor+'" c="'+d.defaultSaveColor+'"><div class="listColor '+(d.partialDate?"partialDate":"")+'" style="display:none">';for(var t=0;t<d.colors.length;t++)e+='<div style="background:#'+d.colors[t]+';" c="'+d.colors[t]+'"></div>';return e+="</div></div>",e+='<div>Title<br /><input type="text" class="eTitle" id="eTitle" /></div>',e+='<div>Description<br /><textarea id="eDesc" class="eDesc" ></textarea></div>',e+='<div ><a href="" class="bSaveEvent">Save Event</a> &nbsp;  &nbsp; <a href="" class="bCancelEvent">Cancel</a></div>',e+="</div>",e+="</div>"}(),"myoverAdd")},100))}}},onChangeMonthYear:function(){r=!0,e(".myover").remove();try{e(".myoverAdd").dialog("close")}catch(e){}},beforeShowDay:function(t){var i="",l=0,o="";if(void 0!==n[e.datepicker.formatDate("yy-mm-dd",t)]){var p=n[e.datepicker.formatDate("yy-mm-dd",t)];o=d.id+"dmy"+(t.getMonth()+1)+"_"+t.getDate()+"_"+t.getFullYear(),m[m.length]={d:o,c:p.c,co_l:p.co_l,co_r:p.co_r,n:l,desc:p.desc},(l=p.st+p.et+2*p.mt)>1?i=p.mt>0?"specialDate":"specialDate"+(d.partialDate?"Middle":""):p.st>0?i="specialDate"+(d.partialDate?"Left":""):p.et>0&&(i="specialDate"+(d.partialDate?"Right":"")),i+=" dw_active"}return r&&(r=!1,setTimeout(function(){e("#"+d.id+" .ui-datepicker-header [title]").attr("title",""),e("#"+d.id+" .ui-datepicker-calendar th [title]").attr("title",""),a(),e("#"+d.id+" .specialSelection").removeClass("specialSel").css("background","#"+d.defaultColor);for(var t=0;t<m.length;t++)e("#"+d.id+" .specialDate."+m[t].d).css("background-color","#"+m[t].c).find("span").attr("title",m[t].desc),e("#"+d.id+" .specialDate."+m[t].d).attr("style","background-color:#"+m[t].c+" !important"),d.partialDate&&(e("#"+d.id+" .specialDateRight."+m[t].d+" .triangle2").css("border-color","#"+m[t].co_r+" transparent transparent transparent"),e("#"+d.id+" .specialDateLeft."+m[t].d+" .triangle").css("border-color"," transparent transparent #"+m[t].co_l+" transparent"),e("#"+d.id+" .specialDateRight."+m[t].d+" .triangle2").parent().find("span,a").attr("title",m[t].desc),e("#"+d.id+" .specialDateLeft."+m[t].d+" .triangle").parent().find("span,a").attr("title",m[t].desc),""!=m[t].co_l&&""!=m[t].co_r&&(e("#"+d.id+" .specialDateMiddle."+m[t].d+" .triangle2").css("border-color","#"+m[t].co_r+" transparent transparent transparent"),e("#"+d.id+" .specialDateMiddle."+m[t].d+" .triangle").css("border-color"," transparent transparent #"+m[t].co_l+" transparent")));d.showTooltipOnMouseOver&&e("#"+d.id+" .ui-datepicker").on("mouseover",".dw_active",function(){if(!e(this).hasClass("ui-datepicker-other-month")){var t=e(this).attr("class").split("dmy")[1].split("_"),a=new Date(t[2].substring(0,4),t[0]-1,t[1]);e(".myover").remove();var i=function(e){for(var t="",a=0;a<s.length;a++)if(e>=s[a].l&&e<=s[a].u){t+='<div style="border-left:3px solid #'+s[a].c+';padding-left:10px;margin-bottom:20px;">',t+="<div >"+c(s[a].l,s[a].u,d.dformat)+"</div>",t+='<div><input type="hidden" class="eIndex" id="eIndex'+s[a].id+'" value="'+a+'"/></div>',t+='<div class="eRead">',t+="<div>"+s[a].title+"</div>",t+="<div>"+s[a].description+"</div>",d.edition&&(t+='<div ><a href="" class="bEditEvent">Edit Event</a> &nbsp;  &nbsp; <a href="" class="bDelEvent">Delete Event</a></div>'),t+="</div>",t+='<div class="eWrite" style="display:none">',t+='<div class="comboColor" style="background:#'+s[a].c+'" c="'+s[a].c+'"><div class="listColor '+(d.partialDate?"partialDate":"")+'" style="display:none">';for(var i=0;i<d.colors.length;i++)t+='<div style="background:#'+d.colors[i]+';" c="'+d.colors[i]+'"></div>';t+="</div></div>",t+='<div><input type="text" class="eTitle" id="eTitle'+s[a].id+'" value="'+s[a].title+'"/></div>',t+='<div><textarea id="eDesc'+s[a].id+'" class="eDesc" >'+s[a].description+"</textarea></div>",t+='<div ><a href="" class="bSaveEvent">Save Event</a> &nbsp;  &nbsp; <a href="" class="bCancelEvent">Cancel</a></div>',t+="</div>",t+="</div>"}return t}(a);return""!=i&&(v(e(this),i,"myover"),e(".bEditEvent").click(function(){return e(this).parent().parent().parent().find(".eRead").css("display","none"),e(this).parent().parent().parent().find(".eWrite").css("display",""),!1}),e(".bDelEvent").click(function(){var t=e(this).parent().parent().parent().find(".eIndex").val();return e.post(d.ajaxURL+"?dex_bccf_calendar_load2=delete",[{name:"id",value:s[t].id}],function(e){e&&(e.isSuccess?(s.splice(t,1),u(),h()):alert("Deleting data error: "+e.msg))},"json"),e(".myover").remove(),!1})),!1}}).on("mouseout",".dw_active",function(){})},1)),d.holidayDates.length>0&&"-1"!=d.holidayDates.indexOf(e.datepicker.formatDate("yy-mm-dd",t))&&(o+=" holidayDates "),[!(l>1&&d.partialDate||l>0&&!d.partialDate||0==d.workingDates[t.getDay()]&&"-1"==d.startReservationDates.indexOf(e.datepicker.formatDate("yy-mm-dd",t))||d.holidayDates.length>0&&"-1"!=d.holidayDates.indexOf(e.datepicker.formatDate("yy-mm-dd",t))||0==d.startReservationWeekly[t.getDay()]&&"-1"==d.startReservationDates.indexOf(e.datepicker.formatDate("yy-mm-dd",t))),i+" "+o+" d"+e.datepicker.formatDate("yy-mm-dd",t)]}}),t(),a(),e("#dp"+d.id).datepicker("option",e.datepicker.regional[d.language]),e("#dp"+d.id).datepicker("option","dateFormat",d.dformat),e("#dp"+d.id).datepicker("option","minDate",d.minDate),e("#dp"+d.id).datepicker("option","maxDate",d.maxDate),e("#dp"+d.id).datepicker("option","firstDay",d.firstDay),e.datepicker.setDefaults(e.datepicker.regional[""]),e(".myover").remove()},u=function(){n=new Array;for(var t=0;t<s.length;t++){for(var a=new Date(s[t].l.getTime()),i=0;a<s[t].u;)void 0===n[e.datepicker.formatDate("yy-mm-dd",a)]&&(n[e.datepicker.formatDate("yy-mm-dd",a)]={st:0,mt:0,et:0,co_l:"",co_r:""}),0==i?n[e.datepicker.formatDate("yy-mm-dd",a)].st++:n[e.datepicker.formatDate("yy-mm-dd",a)].mt++,n[e.datepicker.formatDate("yy-mm-dd",a)].co_l=0==i?s[t].c:"",n[e.datepicker.formatDate("yy-mm-dd",a)].c=s[t].c,n[e.datepicker.formatDate("yy-mm-dd",a)].desc=s[t].description,a.setDate(a.getDate()+1),i++;void 0===n[e.datepicker.formatDate("yy-mm-dd",a)]&&(n[e.datepicker.formatDate("yy-mm-dd",a)]={st:0,mt:0,et:0,co_l:"",co_r:""}),n[e.datepicker.formatDate("yy-mm-dd",a)].et++,n[e.datepicker.formatDate("yy-mm-dd",a)].c=s[t].c,n[e.datepicker.formatDate("yy-mm-dd",a)].co_r=s[t].c,n[e.datepicker.formatDate("yy-mm-dd",a)].desc=s[t].description}},D=function(t,a,i,r){"-1"==t?e.post(d.ajaxURL+"?dex_bccf_calendar_load2=add&id="+d.calendarId,[{name:"startdate",value:l.l.getFullYear()+"-"+(l.l.getMonth()+1)+"-"+l.l.getDate()},{name:"enddate",value:l.u.getFullYear()+"-"+(l.u.getMonth()+1)+"-"+l.u.getDate()},{name:"title",value:a},{name:"description",value:i},{name:"color",value:r}],function(t){t&&(t.isSuccess?(t.events[0].l=e.datepicker.parseDate("mm/dd/yy",t.events[0].dl),t.events[0].u=e.datepicker.parseDate("mm/dd/yy",t.events[0].du),s[s.length]=t.events[0],l.l="",l.u="",o(l.l,l.u),u(),h()):alert("Saving (add) data error: "+t.msg))},"json"):e.post(d.ajaxURL+"?dex_bccf_calendar_load2=edit",[{name:"id",value:s[t].id},{name:"title",value:a},{name:"description",value:i},{name:"color",value:r}],function(e){e&&(e.isSuccess?(s[t].title=a,s[t].desc=i,s[t].c=r,u(),h()):alert("Saving (edit) data error: "+e.msg))},"json")};return function(){try{e.ajax({type:"POST",async:!1,url:d.ajaxURL+"?dex_bccf_calendar_load2=list&"+(""!=d.editid?"editid="+d.editid+"&":"")+"id="+d.calendarId,d:[],dataType:"json",dataFilter:function(e,t){return e},success:function(t){if(t.isSuccess){s=t.events;for(var a=0;a<s.length;a++)try{s[a].l=e.datepicker.parseDate("mm/dd/yy",s[a].dl),s[a].u=e.datepicker.parseDate("mm/dd/yy",s[a].du)}catch(e){s.splice(a,1),a=0}u(),h()}else alert("Loading data error: "+t.msg)},error:function(e){try{alert("Loading (processing) data error: "+e)}catch(e){}}})}catch(e){}}(),this};var a=function(){e(".rcalendar").each(function(){var t=e(this).attr("id"),a=0;e("#"+t+" .specialDateRight, #"+t+" .specialDateLeft").each(function(){a<1*e(this).css("width").replace("px","")&&(a=1*e(this).css("width").replace("px",""))});var i=0;e("#"+t+" .specialDateRight, #"+t+" .specialDateLeft").each(function(){i<1*e(this).css("height").replace("px","")&&(i=1*e(this).css("height").replace("px",""))}),0==a&&e("#"+t+" .specialDate").each(function(){a<1*e(this).css("width").replace("px","")&&(a=1*e(this).css("width").replace("px",""))}),0==i&&e("#"+t+" .specialDate").each(function(){i<1*e(this).css("height").replace("px","")&&(i=1*e(this).css("height").replace("px",""))}),a+="px",i+="px",0==e("#"+t+" .specialDateRight .triangle2").length&&e("#"+t+" .specialDateRight").each(function(){var t=e(this).find("a,span"),a=e('<div class="t"></div>').append(t);e(this).append(a),e(this).append('<div class="triangle2"></div><div class="e">&nbsp;</div>')}),0==e("#"+t+" .specialDateLeft .triangle").length&&e("#"+t+" .specialDateLeft").each(function(){var t=e(this).find("a,span"),a=e('<div class="t"></div>').append(t);e(this).append(a),e(this).append('<div class="triangle"></div><div class="e">&nbsp;</div>')}),0==e("#"+t+" .specialDateMiddle .triangle2").length&&e("#"+t+" .specialDateMiddle").each(function(){var t=e(this).find("span"),a=e('<div class="t"></div>').append(t);e(this).append(a),e(this).append('<div class="triangle2"></div><div class="triangle"></div><div class="e">&nbsp;</div>')}),e("#"+t+" .specialDateLeft .t, #"+t+" .specialDateLeft .e, #"+t+" .specialDateRight .t, #"+t+" .specialDateRight .e, #"+t+" .specialDateMiddle .e").css("width",a).css("height",i),e("#"+t+" .specialDateRight .triangle2").css("border-width",i+" "+a+" 0 0"),e("#"+t+" .specialDateLeft .triangle").css("border-width","0 0 "+i+" "+a),e("#"+t+" .specialDateMiddle .triangle2").css("border-width",i+" "+a+" 0 0"),e("#"+t+" .specialDateMiddle .triangle").css("border-width","0 0 "+i+" "+a)})};if(e(window).resize(function(){t(),a()}),"undefined"==typeof is_bccf_admin);}(myjQuery)});